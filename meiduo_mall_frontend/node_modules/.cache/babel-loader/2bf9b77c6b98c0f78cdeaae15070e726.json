{"remainingRequest":"/Users/zhangjian/PycharmProjects/meiduo/meiduo_mall_frontend/node_modules/thread-loader/dist/cjs.js!/Users/zhangjian/PycharmProjects/meiduo/meiduo_mall_frontend/node_modules/babel-loader/lib/index.js!/Users/zhangjian/PycharmProjects/meiduo/meiduo_mall_frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/zhangjian/PycharmProjects/meiduo/meiduo_mall_frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhangjian/PycharmProjects/meiduo/meiduo_mall_frontend/src/views/Cart.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhangjian/PycharmProjects/meiduo/meiduo_mall_frontend/src/views/Cart.vue","mtime":1623820811526},{"path":"/Users/zhangjian/PycharmProjects/meiduo/meiduo_mall_frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhangjian/PycharmProjects/meiduo/meiduo_mall_frontend/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhangjian/PycharmProjects/meiduo/meiduo_mall_frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/zhangjian/PycharmProjects/meiduo/meiduo_mall_frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhangjian/PycharmProjects/meiduo/meiduo_mall_frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCgovKiBlc2xpbnQtZGlzYWJsZSAqLwppbXBvcnQgQ29udGFpbmVyIGZyb20gIkAvY29tcG9uZW50cy9Db250YWluZXIudnVlIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJDYXJ0IiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgLy8g5p+l6K+i57uT5p6cCiAgICAgIHNrdXM6IFtdLAogICAgICAvLyDmiYDmnInllYblk4HmgLvku7flj4rmlbDph48KICAgICAgdG90YWxfcHJpY2U6IDAsCiAgICAgIGNvdW50OiAwLAogICAgICAvLyDpgInkuK3nmoRza3UKICAgICAgc2VsZWN0ZWRfc2t1czogW10KICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5nZXRfY2FydCgpOwogIH0sCiAgbWV0aG9kczogewogICAgLy8g6I635Y+W6LSt54mp6L2m5L+h5oGvCiAgICBnZXRfY2FydDogZnVuY3Rpb24gZ2V0X2NhcnQoKSB7CiAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgdGhhdC4kYXhpb3MuZ2V0KCJjYXJ0LyIpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIHRoYXQuc2t1cyA9IHJlcy5kYXRhOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDli77pgInkuovku7YKICAgIGhhbmRsZVNlbGVjdGlvbkNoYW5nZTogZnVuY3Rpb24gaGFuZGxlU2VsZWN0aW9uQ2hhbmdlKHJvd3MpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMuY291bnQgPSAwOwogICAgICB0aGlzLnRvdGFsX3ByaWNlID0gMDsKICAgICAgdGhpcy5zZWxlY3RlZF9za3VzID0gcm93czsKICAgICAgcm93cy5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgIF90aGlzLnRvdGFsX3ByaWNlICs9IHZhbHVlLmNvdW50ICogdmFsdWUucHJpY2U7CiAgICAgICAgX3RoaXMuY291bnQgKz0gdmFsdWUuY291bnQ7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOihqOagvOihjOeCueWHu+S6i+S7tu+8jOeCueWHu+ihjOWwseWPlua2iOWLvumAieeKtuaAgeW5tueri+WNs+WGjeasoeWLvumAie+8jOS4uuS6huWHuuWPkWhhbmRsZVNlbGVjdGlvbkNoYW5nZQogICAgaGFuZGxlUm93Q2xpY2s6IGZ1bmN0aW9uIGhhbmRsZVJvd0NsaWNrKHJvdykgewogICAgICB0aGlzLiRyZWZzLnNrdUxpc3QudG9nZ2xlUm93U2VsZWN0aW9uKHJvdywgZmFsc2UpOyAvLyB0aGlzLiRyZWZzLnNrdUxpc3QudG9nZ2xlUm93U2VsZWN0aW9uKHJvdywgdHJ1ZSk7CiAgICB9LAogICAgLy8g5L+u5pS56LSt54mp6L2m5L+h5oGv77yMIOWIqeeUqGFzeW5jIOWSjCBhd2FpdCDlrp7njrDlkIzmraXor7fmsYIKICAgIGVkaXRfY2FydDogZnVuY3Rpb24gZWRpdF9jYXJ0KHJvdykgewogICAgICAvLyDlh4blpIfmlbDmja4KICAgICAgdmFyIHJlcXVlc3RfZGF0YSA9IHsKICAgICAgICBza3VfaWQ6IHJvdy5pZCwKICAgICAgICBjb3VudDogcm93LmNvdW50LAogICAgICAgIHNwZWM6IHJvdy5zcGVjCiAgICAgIH07CiAgICAgIHRoaXMuJGF4aW9zLnB1dCgiY2FydC8iLCB7CiAgICAgICAgZGF0YTogcmVxdWVzdF9kYXRhCiAgICAgIH0pOwogICAgfSwKICAgIC8vIOWIoOmZpOi0reeJqei9puiusOW9lQogICAgZGVsZXRlX2NhcnQ6IGZ1bmN0aW9uIGRlbGV0ZV9jYXJ0KHJvdykgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuJGF4aW9zLmRlbGV0ZSgiY2FydC8iLCB7CiAgICAgICAgZGF0YTogcm93CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgX3RoaXMyLmdldF9jYXJ0KCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvLyDot7Povazoh7Pmj5DkuqTorqLljZXpobXpnaIKICAgIHRvX2NyZWF0ZV9vcmRlcjogZnVuY3Rpb24gdG9fY3JlYXRlX29yZGVyKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIGlmICh0aGlzLnNlbGVjdGVkX3NrdXMubGVuZ3RoID09IDApIHsKICAgICAgICB0aGlzLiRub3RpZnkud2FybmluZyh7CiAgICAgICAgICB0aXRsZTogIuivt+WFiOmAieaLqemcgOimgei0reS5sOeahOWVhuWTgSIKICAgICAgICB9KTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLiRzdG9yZS5zdGF0ZS50b2tlbiA9PSB1bmRlZmluZWQpIHsKICAgICAgICB0aGlzLiRub3RpZnkud2FybmluZyh7CiAgICAgICAgICB0aXRsZTogIuivt+WFiOeZu+mZhiIKICAgICAgICB9KTsKICAgICAgICByZXR1cm47CiAgICAgIH0gLy8g5YeG5aSH5pWw5o2uCgoKICAgICAgdmFyIHJlcXVlc3RfZGF0YSA9IFtdOwogICAgICB0aGlzLnNlbGVjdGVkX3NrdXMuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7CiAgICAgICAgdmFyIHNrdSA9IHt9OwogICAgICAgIHNrdS5za3VfaWQgPSB2YWx1ZS5pZDsKICAgICAgICBza3Uuc3BlYyA9IHZhbHVlLnNwZWM7CiAgICAgICAgcmVxdWVzdF9kYXRhW2luZGV4XSA9IHNrdTsKICAgICAgfSk7CiAgICAgIHZhciBwYXJhbXMgPSB7CiAgICAgICAgc2t1czogcmVxdWVzdF9kYXRhCiAgICAgIH07CiAgICAgIHRoaXMuJGFwaS5zZWxlY3RzKHBhcmFtcykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT0gMjAxKSB7CiAgICAgICAgICBfdGhpczMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgbmFtZTogImNyZWF0ZV9vcmRlciIKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBDb250YWluZXI6IENvbnRhaW5lcgogIH0sCiAgd2F0Y2g6IHt9Cn07"},{"version":3,"sources":["Cart.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <Container>\n    <el-divider></el-divider>\n    <el-row>\n      <el-col :span=\"2\">\n        <pre style=\"margin:0; padding: 0;\">&nbsp;</pre>\n      </el-col>\n      <el-col :span=\"20\">\n        <div class=\"title\">\n          <p style=\"font-size: 1.2em; color: red;\">\n            <span class=\"el-icon-shopping-cart-full\">商品清单</span>\n          </p>\n        </div>\n      </el-col>\n    </el-row>\n    <!-- 详情展示区 -->\n    <el-row>\n      <el-col :span=\"2\">\n        <pre style=\"margin:0; padding: 0;\">&nbsp;</pre>\n      </el-col>\n      <el-col :span=\"20\">\n        <div class=\"detail\">\n          <div>\n            <!-- 商品展示 -->\n            <el-table\n              :data=\"skus\"\n              size=\"mini\"\n              height=\"40em\"\n              highlight-cuurent-row\n              ref=\"skuList\"\n              :header-cell-style=\"{background:'#eef1f6',color:'#606266'}\"\n              :header-row-style=\"{height:'5em'}\"\n              @selection-change=\"handleSelectionChange\"\n              @row-click=\"handleRowClick\"\n            >\n              <el-table-column type=\"selection\" align=\"center\"></el-table-column>\n              <el-table-column width=\"150\" align=\"center\">\n                <template slot-scope=\"scope\">\n                  <el-image :src=\"scope.row.default_image_url\" style=\"width: 8em; height: 8em;\"></el-image>\n                </template>\n              </el-table-column>\n              <el-table-column prop=\"name\" label=\"商品名称\" width=\"300\" align=\"center\"></el-table-column>\n              <el-table-column prop=\"spec\" label=\"规格\" width=\"150\" align=\"center\"></el-table-column>\n              <el-table-column prop=\"price\" label=\"价格\" width=\"100\" align=\"center\"></el-table-column>\n              <el-table-column label=\"数量\" width=\"180\" align=\"center\">\n                <template slot-scope=\"scope\">\n                  <el-input-number\n                    v-model=\"scope.row.count\"\n                    :min=\"1\"\n                    :max=\"scope.row.stock\"\n                    size=\"mini\"\n                    @change=\"edit_cart(scope.row)\"\n                  ></el-input-number>\n                </template>\n              </el-table-column>\n              <el-table-column label=\"小计\" width=\"120\" align=\"center\">\n                <!-- 保留两位小数 -->\n                <template\n                  slot-scope=\"scope\"\n                >{{ (scope.row.count * scope.row.price).toFixed(2) }} &nbsp;元</template>\n              </el-table-column>\n              <el-table-column label=\"操作\" align=\"center\">\n                <template slot-scope=\"scope\">\n                  <el-button\n                    type=\"danger\"\n                    icon=\"el-icon-delete\"\n                    size=\"mini\"\n                    @click=\"delete_cart(scope.row)\"\n                  >删除</el-button>\n                </template>\n              </el-table-column>\n            </el-table>\n          </div>\n          <!-- 结算栏 -->\n          <div class=\"account\">\n            <el-col :span=\"15\">\n              <el-col :span=\"2\">\n                <pre style=\"margin:0; padding: 0;\">&nbsp;</pre>\n              </el-col>\n              <el-col :span=\"4\">\n                <p style=\"font-size: 1.5em;color: red;\">结&nbsp;算</p>\n              </el-col>\n            </el-col>\n            <el-col :span=\"4\">\n              <p style=\"text-align: right;\">\n                <span style=\"font-size: 0.5em;\">合计（不含运费）：</span>\n                <span style=\"font-size: 0.5em; color: red;\">¥ &nbsp;</span>\n                <span style=\"font-size: 1.2em; color: red;\">{{ total_price }}</span>\n              </p>\n              <p style=\"font-size: 0.5em; text-align: right;\">\n                <span>共计</span>\n                <span style=\"color: red;\">&nbsp;{{ count }}&nbsp;</span>\n                <span>件商品</span>\n              </p>\n            </el-col>\n            <el-col :span=\"1\">\n              <pre style=\"margin:0; padding: 0;\">&nbsp;</pre>\n            </el-col>\n            <el-col :span=\"4\">\n              <div class=\"submit_button\">\n                <el-link\n                  style=\"color: white; font-size: 1.2em;\"\n                  :underline=\"false\"\n                  @click=\"to_create_order\"\n                >立&nbsp;即&nbsp;付&nbsp;款</el-link>\n              </div>\n            </el-col>\n          </div>\n        </div>\n      </el-col>\n    </el-row>\n  </Container>\n</template>\n<script>\n/* eslint-disable */\nimport Container from \"@/components/Container.vue\";\n\nexport default {\n  name: \"Cart\",\n  data() {\n    return {\n      // 查询结果\n      skus: [],\n\n      // 所有商品总价及数量\n      total_price: 0,\n      count: 0,\n\n      // 选中的sku\n      selected_skus: []\n    };\n  },\n  mounted() {\n    this.get_cart();\n  },\n  methods: {\n    // 获取购物车信息\n    get_cart() {\n      let that = this;\n      that.$axios.get(\"cart/\").then(res => {\n        that.skus = res.data;\n      });\n    },\n\n    // 勾选事件\n    handleSelectionChange(rows) {\n      this.count = 0;\n      this.total_price = 0;\n      this.selected_skus = rows;\n      rows.forEach(value => {\n        this.total_price += value.count * value.price;\n        this.count += value.count;\n      });\n    },\n\n    // 表格行点击事件，点击行就取消勾选状态并立即再次勾选，为了出发handleSelectionChange\n    handleRowClick(row) {\n      this.$refs.skuList.toggleRowSelection(row, false);\n      // this.$refs.skuList.toggleRowSelection(row, true);\n    },\n\n    // 修改购物车信息， 利用async 和 await 实现同步请求\n    edit_cart: function(row) {\n      // 准备数据\n      let request_data = {\n        sku_id: row.id,\n        count: row.count,\n        spec: row.spec\n      };\n\n      this.$axios.put(\"cart/\", {\n        data: request_data\n      });\n    },\n\n    // 删除购物车记录\n    delete_cart(row) {\n      this.$axios\n        .delete(\"cart/\", {\n          data: row\n        })\n        .then(res => {\n          if (res.status == 200) {\n            this.get_cart();\n          }\n        });\n    },\n\n    // 跳转至提交订单页面\n    to_create_order() {\n      if (this.selected_skus.length == 0) {\n        this.$notify.warning({\n          title: \"请先选择需要购买的商品\"\n        });\n        return;\n      }\n      if (this.$store.state.token == undefined) {\n        this.$notify.warning({\n          title: \"请先登陆\"\n        });\n        return;\n      }\n\n      // 准备数据\n      let request_data = [];\n      this.selected_skus.forEach((value, index) => {\n        let sku = {};\n        sku.sku_id = value.id;\n        sku.spec = value.spec;\n\n        request_data[index] = sku;\n      });\n      let params = { skus: request_data };\n\n      this.$api.selects(params).then(res => {\n        if (res.status == 201) {\n          this.$router.push({\n            name: \"create_order\"\n          });\n        }\n      });\n    }\n  },\n  components: {\n    Container\n  },\n  watch: {}\n};\n</script>\n<style  scoped>\n.el-divider {\n  margin: 0;\n  padding: 0;\n  width: 85%;\n  margin-left: 6.5em;\n}\n.el-row {\n  margin: 0 0;\n}\n.detail {\n  height: 35em;\n  background-color: rgb(248, 219, 156);\n}\n.submit_button {\n  background-color: rgb(236, 62, 62);\n  height: 5em;\n  line-height: 5em;\n  text-align: center;\n}\n</style>"],"sourceRoot":"src/views"}]}