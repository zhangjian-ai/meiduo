{"remainingRequest":"/Users/zhangjian/PycharmProjects/meiduo/meiduo_mall_frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhangjian/PycharmProjects/meiduo/meiduo_mall_frontend/src/views/Register.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhangjian/PycharmProjects/meiduo/meiduo_mall_frontend/src/views/Register.vue","mtime":1622035352550},{"path":"/Users/zhangjian/PycharmProjects/meiduo/meiduo_mall_frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhangjian/PycharmProjects/meiduo/meiduo_mall_frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/zhangjian/PycharmProjects/meiduo/meiduo_mall_frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhangjian/PycharmProjects/meiduo/meiduo_mall_frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiUmVnaXN0ZXIiLAogIGRhdGEoKSB7CiAgICAvLyDmoKHpqozkuKTmrKHlr4bnoIHovpPlhaXmmK/lkKbnm7jlkIzvvIzmoKHpqozmiJDlip/ml7bkuIDlrpropoHlm57osINjYWxsYmFjaygp44CC5ZCm5YiZ5Lya5a+86Ie05YWo5bGA5qCh6aqM6YCa6L+H5ZCO5LiN57un57ut5omn6KGMCiAgICBjb25zdCBjaGVja19wd2QgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7CiAgICAgIGlmICh0aGlzLmZvcm0ucGFzc3dvcmQgPT09IHZhbHVlKSB7CiAgICAgICAgY2FsbGJhY2soKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmZvcm0ucGFzc3dvcmQyID0gIiI7CiAgICAgICAgLy8g5b2T5qCh6aqM5LiN6L+H5pe277yM56Gu6K6k5a+G56CB5qGG6Ieq5Yqo6I635b6X54Sm54K5CiAgICAgICAgLy8gdGhpcy4kcmVmcy5wYXNzd29yZDIuZm9jdXMoKTsKICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoIuS4pOasoei+k+WFpeeahOWvhueggeS4jeS4gOiHtO+8jOivt+mHjeaWsOi+k+WFpSIpKTsKICAgICAgfQogICAgfTsKICAgIGNvbnN0IGNoZWNrX3VzZXJuYW1lID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gewogICAgICB0aGlzLiRheGlvcwogICAgICAgIC5nZXQoInVzZXJzLyIgKyB2YWx1ZSArICIvY291bnQvIikKICAgICAgICAudGhlbihyZXMgPT4gewogICAgICAgICAgaWYgKHJlcy5kYXRhLmNvdW50ID4gMCkgewogICAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoIueUqOaIt+WQjeW3suWtmOWcqCIpKTsKICAgICAgICAgIH0KICAgICAgICAgIGNhbGxiYWNrKCk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZXJyID0+IHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoZXJyLm1lc3NhZ2UpOwogICAgICAgIH0pOwogICAgfTsKICAgIGNvbnN0IGNoZWNrX21vYmlsZSA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsKICAgICAgdGhpcy4kYXhpb3MKICAgICAgICAuZ2V0KCJ1c2Vycy8iICsgdmFsdWUgKyAiL2NvdW50LyIpCiAgICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICAgIGlmIChyZXMuZGF0YS5jb3VudCA+IDApIHsKICAgICAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCLor6XmiYvmnLrlj7flt7Lnu4/ms6jlhowiKSk7CiAgICAgICAgICB9CiAgICAgICAgICBjYWxsYmFjaygpOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGVyci5tZXNzYWdlKTsKICAgICAgICB9KTsKICAgIH07CgogICAgcmV0dXJuIHsKICAgICAgLy8g5Zu+54mH6Lev5b6E44CC5byV55So5pys5Zyw5Zu+54mH5pe277yM5bCG5Zu+54mH5L2c5Li65a+56LGh5a+85YWl5omN6IO957uR5a6aCiAgICAgIGltYWdlOiB7CiAgICAgICAgbG9nbzogcmVxdWlyZSgiLi4vYXNzZXRzL2ltYWdlcy9sb2dvLnBuZyIpLAogICAgICAgIHJlZ2lzdGVyOiByZXF1aXJlKCIuLi9hc3NldHMvaW1hZ2VzL3JlZ2lzdGVyX2Jhbm5lci5wbmciKSwKICAgICAgICBpbnRlcnZhbDogcmVxdWlyZSgiLi4vYXNzZXRzL2ltYWdlcy9pbnRlcnZhbF9saW5lLnBuZyIpCiAgICAgIH0sCgogICAgICAvLyDlj5HpgIHnn63kv6HmjInpkq7moIfor4blj4rmlofmnKwKICAgICAgc2VuZF9mbGFnOiBmYWxzZSwKICAgICAgc2VuZF90aXBzOiAi5Y+R6YCB6aqM6K+B56CBIiwKCiAgICAgIC8vIOazqOWGjOihqOWNlQogICAgICBmb3JtOiB7CiAgICAgICAgdXNlcm5hbWU6ICIiLAogICAgICAgIHBhc3N3b3JkOiAiIiwKICAgICAgICBwYXNzd29yZDI6ICIiLAogICAgICAgIG1vYmlsZTogIiIsCiAgICAgICAgc21zX2NvZGU6ICIiLAogICAgICAgIGFsbG93OiAiIgogICAgICB9LAoKICAgICAgLy8g6KGo5Y2V5qCh6aqM6KeE5YiZCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgdXNlcm5hbWU6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIHBhdHRlcm46IC9eXHd7NSwyMH0kLywKICAgICAgICAgICAgbWVzc2FnZTogIueUqOaIt+WQjeW6lOeUseWtl+avjeaVsOWtl+aIluS4i+WIkue6v+e7hOaIkOeahDbvvZ4xOOS9jeWtl+espiIsCiAgICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgICAgfSwKICAgICAgICAgIHsgdmFsaWRhdG9yOiBjaGVja191c2VybmFtZSwgdHJpZ2dlcjogImJsdXIiIH0KICAgICAgICBdLAogICAgICAgIHBhc3N3b3JkOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICBwYXR0ZXJuOiAvXlx3ezgsMjB9JC8sCiAgICAgICAgICAgIG1lc3NhZ2U6ICLlr4bnoIHlupTnlLHlrZfmr43mlbDlrZfmiJbkuIvliJLnur/nu4TmiJDnmoQ2772eMTjkvY3lrZfnrKYiLAogICAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICAgIH0KICAgICAgICBdLAogICAgICAgIHBhc3N3b3JkMjogWwogICAgICAgICAgewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogIuehruiupOWvhueggeS4uuW/heWhq+mhuSIsCiAgICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgICAgfSwKICAgICAgICAgIHsgdmFsaWRhdG9yOiBjaGVja19wd2QsIHRyaWdnZXI6ICJibHVyIiB9CiAgICAgICAgXSwKICAgICAgICBtb2JpbGU6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIHBhdHRlcm46IC9eMVszLTldezF9XGR7OX0kLywKICAgICAgICAgICAgbWVzc2FnZTogIuaJi+acuuWPt+eggeS4jeWQiOazlSIsCiAgICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgICAgfSwKICAgICAgICAgIHsgdmFsaWRhdG9yOiBjaGVja19tb2JpbGUsIHRyaWdnZXI6ICJibHVyIiB9CiAgICAgICAgXSwKICAgICAgICBzbXNfY29kZTogWwogICAgICAgICAgewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgcGF0dGVybjogL15bMC05XXs2fSQvLAogICAgICAgICAgICBtZXNzYWdlOiAi6aqM6K+B56CB6ZSZ6K+vIiwKICAgICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgICB9CiAgICAgICAgXSwKICAgICAgICBhbGxvdzogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+WLvumAieS9v+eUqOWNj+iuriIsIHRyaWdnZXI6ICJjaGFuZ2UiIH0KICAgICAgICBdCiAgICAgIH0KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDojrflj5bnn63kv6Hpqozor4HnoIEKICAgIGdldFNtc0NvZGUoKSB7CiAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgaWYgKHRoYXQuZm9ybS5tb2JpbGUpIHsKICAgICAgICAvLyDliKTmlq3mmK/lkKblt7Lnu4/lj5Hkuobnn63kv6EKICAgICAgICBpZiAodGhhdC5zZW5kX2ZsYWcpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHRoYXQuJGF4aW9zCiAgICAgICAgICAuZ2V0KCJzbXNfY29kZXMvIiArIHRoYXQuZm9ybS5tb2JpbGUsIHt9KQogICAgICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT09IDApIHsKICAgICAgICAgICAgICAvLyDnn63kv6Hlj5HpgIHmiJDlip/lkI7vvIznva7ngbDmjInpkq7vvIzlgJLorqHml7Y2MOenku+8jDYw56eS5ZCO5YWB6K6455So5oi35YaN5qyh54K55Ye75Y+R6YCB55+t5L+h6aqM6K+B56CB55qE5oyJ6ZKuCiAgICAgICAgICAgICAgdGhhdC5zZW5kX2ZsYWcgPSB0cnVlOwogICAgICAgICAgICAgIGxldCBudW0gPSA2MDsKICAgICAgICAgICAgICAvLyDorr7nva7kuIDkuKrorqHml7blmagKICAgICAgICAgICAgICBsZXQgdGltZXIgPSBzZXRJbnRlcnZhbCgKICAgICAgICAgICAgICAgICgpID0+IHsKICAgICAgICAgICAgICAgICAgaWYgKG51bSA9PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgLy8g5aaC5p6c6K6h5pe25Zmo5Yiw5pyA5ZCOLCDmuIXpmaTorqHml7blmajlr7nosaEKICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVyKTsKICAgICAgICAgICAgICAgICAgICAvLyDlsIbngrnlh7vojrflj5bpqozor4HnoIHnmoTmjInpkq7lsZXnpLrnmoTmlofmnKzlm57lpI3miJDljp/lp4vmlofmnKwKICAgICAgICAgICAgICAgICAgICB0aGF0LnNlbmRfdGlwcyA9ICLlj5HpgIHpqozor4HnoIEiOwogICAgICAgICAgICAgICAgICAgIC8vIOWwhueCueWHu+aMiemSrueahG9uY2xpY2vkuovku7blh73mlbDmgaLlpI3lm57ljrsKICAgICAgICAgICAgICAgICAgICB0aGF0LnNlbmRfZmxhZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIG51bSAtPSAxOwogICAgICAgICAgICAgICAgICAgIC8vIOWxleekuuWAkuiuoeaXtuS/oeaBrwogICAgICAgICAgICAgICAgICAgIHRoYXQuc2VuZF90aXBzID0gbnVtICsgIuenkiI7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAxMDAwLAogICAgICAgICAgICAgICAgNjAKICAgICAgICAgICAgICApOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoYXQuJG1lc3NhZ2UuZXJyb3IoIuacjeWKoeWZqOacquefpemUmeivr++8gSIpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICAgIHRoYXQuJG1lc3NhZ2UuZXJyb3IoZXJyLm1lc3NhZ2UpOwogICAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhhdC4kbWVzc2FnZS5lcnJvcigi6K+35YWI5aGr5YaZ5omL5py65Y+377yBIik7CiAgICAgIH0KICAgIH0sCiAgICAvLyDmj5DkuqTms6jlhozooajljZUKICAgIHN1Ym1pdCgpIHsKICAgICAgdGhpcy4kcmVmcy5yZWdpc3RlckZvcm0udmFsaWRhdGUodmFsaWQgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgbGV0IHRoYXQgPSB0aGlzOwogICAgICAgICAgdGhhdC4kYXhpb3MKICAgICAgICAgICAgLnBvc3QoInVzZXJzLyIsIHRoYXQuZm9ybSkKICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAvLyDms6jlhozmiJDlip/ml7bvvIznirbmgIHnoIHkuLoyMDEKICAgICAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PSAyMDEpIHsKICAgICAgICAgICAgICAgIC8vdGhpcy4kcm91dGVyLnB1c2goIi9jYXJ0IikKICAgICAgICAgICAgICAgIC8v5Lyg6YCS55qE5Y+C5pWw55Soe3sgJHJvdXRlLnF1ZXJ5Lmdvb2RzSWQgfX3ojrflj5YKICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgbmFtZTogImhvbWUiIH0pOwogICAgICAgICAgICAgICAgLy90aGlzLiRyb3V0ZXIuZ28oLTIpCiAgICAgICAgICAgICAgICAvL+WQjumAgOS4pOatpQoKICAgICAgICAgICAgICAgIC8v5rOo5YaM5oiQ5Yqf5ZCO77yM5Zyo5pys5Zyw5L+d5a2YdG9rZW4saWQsdXNlcm5hbWXnrYnkv6Hmga8KICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLmNsZWFyKCk7ICAvLyBzZXNzaW9uU3RvcmFnZeWFs+mXrea1j+iniOWZqOWNs+a4hemZpAogICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLmNsZWFyKCk7ICAgLy8g5rC45LmF5L+d5a2YCiAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS50b2tlbiA9IHJlcy5kYXRhLnRva2VuOwogICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2UudXNlcm5hbWUgPSByZXMuZGF0YS51c2VybmFtZTsKICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnVzZXJfaWQgPSByZXMuZGF0YS5pZDsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhhdC4kbWVzc2FnZS5lcnJvcigi5pyq55+l6ZSZ6K+v77yM6K+36IGU57O7566h55CG5ZGYIik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgICAgICAuY2F0Y2goZXJyID0+IHsKICAgICAgICAgICAgICB0aGF0LiRtZXNzYWdlLmVycm9yKCLmnI3liqHlmajplJnor68iKTsKICAgICAgICAgICAgICB0aGF0LiRtZXNzYWdlLmVycm9yKGVyci5tZXNzYWdlKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfSk7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["Register.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Register.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <el-row>\n    <!-- 左半部分 -->\n    <el-col :span=\"14\" style=\"margin-top: 8em; text-align: right;\">\n      <div>\n        <div>\n          <el-image :src=\"image.logo\"></el-image>\n        </div>\n        <div>\n          <span class=\"banner-text\">商品美·种类多·欢迎选购</span>\n        </div>\n        <div></div>\n        <el-image :src=\"image.register\"></el-image>\n      </div>\n    </el-col>\n    <!-- 分割线 -->\n    <el-col :span=\"1\" style=\"margin-top: 6em; text-align: center;\">\n      <el-image :src=\"image.interval\"></el-image>\n    </el-col>\n    <!-- 右半部分 -->\n    <el-col :span=\"9\" style=\"width: 22em; margin-top: 8em;\">\n      <div>\n        <!-- 标题栏 -->\n        <el-row style=\"line-height: 3em;\">\n          <el-col :span=\"18\">\n            <span class=\"register-text\">用户注册</span>\n          </el-col>\n          <el-col :span=\"6\" style=\"text-align: right;\">\n            <!-- click事件直接绑定router内置函数完成页面跳转 -->\n            <el-button type=\"text\" @click=\"$router.push({ name: 'login' })\">\n              登陆\n              <i class=\"el-icon-d-arrow-right el-icon--right\"></i>\n            </el-button>\n          </el-col>\n        </el-row>\n        <!-- 注册表单 -->\n        <el-form size=\"mini\" label-width=\"6em\" :model=\"form\" :rules=\"rules\" ref=\"registerForm\">\n          <el-form-item label=\"用户名:\" prop=\"username\">\n            <el-input v-model=\"form.username\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"密码:\" prop=\"password\">\n            <el-input v-model=\"form.password\" type=\"password\" auto-complete=\"off\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"确认密码:\" prop=\"password2\">\n            <el-input v-model=\"form.password2\" type=\"password\" auto-complete=\"off\" ref=\"password2\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"手机号:\" prop=\"mobile\">\n            <el-input v-model=\"form.mobile\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"验证码:\" prop=\"sms_code\">\n            <span style=\"width: 20em;\">\n              <el-input style=\"width: 10em; margin-right:1em;\" v-model=\"form.sms_code\"></el-input>\n              <el-button\n                style=\"width: 8em; text-align: center;\"\n                @click=\"getSmsCode\"\n                type=\"primary\"\n                :disabled=\"send_flag\"\n              >{{ send_tips }}</el-button>\n            </span>\n          </el-form-item>\n          <el-form-item style=\"text-align: left;\" label-width=\"6em\" prop=\"allow\">\n            <el-checkbox v-model=\"form.allow\" true-label=\"true\">同意 “张老师的使用协议”</el-checkbox>\n          </el-form-item>\n          <el-form-item style=\"text-align: center; margin-top: 0px;\" label-width=\"0\">\n            <el-button type=\"danger\" size=\"medium\" style=\"width: 20em;\" @click=\"submit\">立即注册</el-button>\n          </el-form-item>\n        </el-form>\n      </div>\n    </el-col>\n  </el-row>\n</template>\n\n<script>\nexport default {\n  name: \"Register\",\n  data() {\n    // 校验两次密码输入是否相同，校验成功时一定要回调callback()。否则会导致全局校验通过后不继续执行\n    const check_pwd = (rule, value, callback) => {\n      if (this.form.password === value) {\n        callback();\n      } else {\n        this.form.password2 = \"\";\n        // 当校验不过时，确认密码框自动获得焦点\n        // this.$refs.password2.focus();\n        callback(new Error(\"两次输入的密码不一致，请重新输入\"));\n      }\n    };\n    const check_username = (rule, value, callback) => {\n      this.$axios\n        .get(\"users/\" + value + \"/count/\")\n        .then(res => {\n          if (res.data.count > 0) {\n            callback(new Error(\"用户名已存在\"));\n          }\n          callback();\n        })\n        .catch(err => {\n          this.$message.error(err.message);\n        });\n    };\n    const check_mobile = (rule, value, callback) => {\n      this.$axios\n        .get(\"users/\" + value + \"/count/\")\n        .then(res => {\n          if (res.data.count > 0) {\n            callback(new Error(\"该手机号已经注册\"));\n          }\n          callback();\n        })\n        .catch(err => {\n          this.$message.error(err.message);\n        });\n    };\n\n    return {\n      // 图片路径。引用本地图片时，将图片作为对象导入才能绑定\n      image: {\n        logo: require(\"../assets/images/logo.png\"),\n        register: require(\"../assets/images/register_banner.png\"),\n        interval: require(\"../assets/images/interval_line.png\")\n      },\n\n      // 发送短信按钮标识及文本\n      send_flag: false,\n      send_tips: \"发送验证码\",\n\n      // 注册表单\n      form: {\n        username: \"\",\n        password: \"\",\n        password2: \"\",\n        mobile: \"\",\n        sms_code: \"\",\n        allow: \"\"\n      },\n\n      // 表单校验规则\n      rules: {\n        username: [\n          {\n            required: true,\n            pattern: /^\\w{5,20}$/,\n            message: \"用户名应由字母数字或下划线组成的6～18位字符\",\n            trigger: \"blur\"\n          },\n          { validator: check_username, trigger: \"blur\" }\n        ],\n        password: [\n          {\n            required: true,\n            pattern: /^\\w{8,20}$/,\n            message: \"密码应由字母数字或下划线组成的6～18位字符\",\n            trigger: \"blur\"\n          }\n        ],\n        password2: [\n          {\n            required: true,\n            message: \"确认密码为必填项\",\n            trigger: \"blur\"\n          },\n          { validator: check_pwd, trigger: \"blur\" }\n        ],\n        mobile: [\n          {\n            required: true,\n            pattern: /^1[3-9]{1}\\d{9}$/,\n            message: \"手机号码不合法\",\n            trigger: \"blur\"\n          },\n          { validator: check_mobile, trigger: \"blur\" }\n        ],\n        sms_code: [\n          {\n            required: true,\n            pattern: /^[0-9]{6}$/,\n            message: \"验证码错误\",\n            trigger: \"blur\"\n          }\n        ],\n        allow: [\n          { required: true, message: \"请勾选使用协议\", trigger: \"change\" }\n        ]\n      }\n    };\n  },\n  methods: {\n    // 获取短信验证码\n    getSmsCode() {\n      let that = this;\n      if (that.form.mobile) {\n        // 判断是否已经发了短信\n        if (that.send_flag) {\n          return;\n        }\n\n        that.$axios\n          .get(\"sms_codes/\" + that.form.mobile, {})\n          .then(res => {\n            if (res.data.code === 0) {\n              // 短信发送成功后，置灰按钮，倒计时60秒，60秒后允许用户再次点击发送短信验证码的按钮\n              that.send_flag = true;\n              let num = 60;\n              // 设置一个计时器\n              let timer = setInterval(\n                () => {\n                  if (num == 1) {\n                    // 如果计时器到最后, 清除计时器对象\n                    clearInterval(timer);\n                    // 将点击获取验证码的按钮展示的文本回复成原始文本\n                    that.send_tips = \"发送验证码\";\n                    // 将点击按钮的onclick事件函数恢复回去\n                    that.send_flag = false;\n                  } else {\n                    num -= 1;\n                    // 展示倒计时信息\n                    that.send_tips = num + \"秒\";\n                  }\n                },\n                1000,\n                60\n              );\n            } else {\n              that.$message.error(\"服务器未知错误！\");\n            }\n          })\n          .catch(err => {\n            that.$message.error(err.message);\n          });\n      } else {\n        that.$message.error(\"请先填写手机号！\");\n      }\n    },\n    // 提交注册表单\n    submit() {\n      this.$refs.registerForm.validate(valid => {\n        if (valid) {\n          let that = this;\n          that.$axios\n            .post(\"users/\", that.form)\n            .then(res => {\n              // 注册成功时，状态码为201\n              if (res.status == 201) {\n                //this.$router.push(\"/cart\")\n                //传递的参数用{{ $route.query.goodsId }}获取\n                this.$router.push({ name: \"home\" });\n                //this.$router.go(-2)\n                //后退两步\n\n                //注册成功后，在本地保存token,id,username等信息\n                sessionStorage.clear();  // sessionStorage关闭浏览器即清除\n                localStorage.clear();   // 永久保存\n                sessionStorage.token = res.data.token;\n                sessionStorage.username = res.data.username;\n                sessionStorage.user_id = res.data.id;\n              } else {\n                that.$message.error(\"未知错误，请联系管理员\");\n              }\n            })\n            .catch(err => {\n              that.$message.error(\"服务器错误\");\n              that.$message.error(err.message);\n            });\n        }\n        return false;\n      });\n    }\n  }\n};\n</script>\n\n<style scoped>\n.banner-text {\n  color: red;\n}\n.register-text {\n  font-size: 1.5em;\n  font-family: Verdana, Geneva, Tahoma, sans-serif;\n  color: grey;\n}\n.el-input {\n  width: 20em;\n}\n.el-form-item {\n  margin-top: 2em;\n}\n.el-form {\n  border: grey solid 0.5px;\n  border-radius: 5px;\n  padding-bottom: 1em;\n}\n</style>"]}]}