{"remainingRequest":"/Users/zhangjian/PycharmProjects/meiduo/meiduo_mall_frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhangjian/PycharmProjects/meiduo/meiduo_mall_frontend/src/components/VerifyEmail.vue?vue&type=style&index=0&id=d07929ba&scoped=true&lang=css&","dependencies":[{"path":"/Users/zhangjian/PycharmProjects/meiduo/meiduo_mall_frontend/src/components/VerifyEmail.vue","mtime":1623768410070},{"path":"/Users/zhangjian/PycharmProjects/meiduo/meiduo_mall_frontend/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhangjian/PycharmProjects/meiduo/meiduo_mall_frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/zhangjian/PycharmProjects/meiduo/meiduo_mall_frontend/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/zhangjian/PycharmProjects/meiduo/meiduo_mall_frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhangjian/PycharmProjects/meiduo/meiduo_mall_frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgpwIHsKICBtYXJnaW46IDAuNWVtOwp9CgpkaXYgewogIGJhY2tncm91bmQtY29sb3I6d2hpdGU7CiAgdGV4dC1hbGlnbjogY2VudGVyOwp9Cg=="},{"version":3,"sources":["VerifyEmail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgFA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"VerifyEmail.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div style=\"width: 50em; margin-top: 2em;\">\n    <div v-if=\"loading\">\n      <el-image :src=\"image.loading\"></el-image>\n    </div>\n    <div v-if=\"verify_pass\">\n      <el-image :src=\"image.success\" style=\"width: 5em; height: 5em;\"></el-image>\n      <p style=\"font-size: 2.5em; color: green;\">恭喜您，认证成功！</p>\n      <el-button type=\"primary\" @click=\"$router.push({name: 'home'})\">返回主页</el-button>\n    </div>\n    <div v-if=\"verify_fail\">\n      <el-image :src=\"image.failure\" style=\"width: 5em; height: 5em;\"></el-image>\n      <p style=\"font-size: 2.5em; color: red;\">认证失败！</p>\n      <p style=\"font-size: 1em; color: red;\">失败原因：{{ error_message }}</p>\n      <el-button type=\"primary\" @click=\"$router.push({name: 'home'})\">返回主页</el-button>\n    </div>\n  </div>\n</template>\n<script>\nexport default {\n  name: \"VerifyEmail\",\n  data() {\n    return {\n      // 认证结果\n      verify_pass: false,\n      verify_fail: false,\n      error_message: \"\",\n\n      // 加载中\n      loading: true,\n\n      // 图片路径。引用本地图片时，将图片作为对象导入才能绑定\n      image: {\n        success: require(\"../assets/images/success.jpeg\"),\n        failure: require(\"../assets/images/failure.jpeg\"),\n        loading: require(\"../assets/images/loading.gif\")\n      }\n    };\n  },\n  mounted() {\n    this.verify_email();\n  },\n  methods: {\n    // 获取回调地址中的字段的值\n    getCode(name) {\n      let url = window.location.href;\n\n      let params = url.substr(url.lastIndexOf(\"?\") + 1).split(\"&\");\n      for (let i = 0; i < params.length; i++) {\n        let param = params[i];\n        let key = param.split(\"=\")[0];\n        let value = param.split(\"=\")[1];\n        if (key === name) {\n          return value;\n        }\n      }\n    },\n    verify_email() {\n      let token = this.getCode(\"token\");\n      let that = this;\n      that.$axios\n        .get(\"verify_email/\", {\n          params: {\n            token: token\n          }\n        })\n        .then(() => {\n          that.loading = false;\n          that.verify_pass = true;\n        })\n        .catch(err => {\n          that.loading = false;\n          that.verify_fail = true;\n          that.error_message = err.response.data.msg;\n        });\n    }\n  }\n};\n</script>\n<style scoped>\np {\n  margin: 0.5em;\n}\n\ndiv {\n  background-color:white;\n  text-align: center;\n}\n</style>"]}]}